<h2>Summary</h2>

<!-- Nav tabs-->
<ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#Projects">Projects</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#Tasks">Tasks</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#FinishedTasks">Finished Tasks</a>
    </li>

    <!-- Dropdown -->
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Project</a>
        <div class="dropdown-menu">
            {{#each projects}}
                <a class="dropdown-item" data-toggle="tab" href="#Project{{@index}}" onclick="myFunction()">{{this.name}}</a>
            {{/each}}
        </div>
    </li>
</ul>


<div class="tab-content">
    <!-- Projects summary :
        all the projects of the user-->
    <div id="Projects" class="container tab-pane fade">
        <table class="table">
            <tr>
                <th>Project</th>
                <th>Members</th>
            </tr>
            {{#each projects}}
                <tr>
                    <td>{{this.name}}</td>
                    <td><ul>{{#each this.members}}
                            <li><span class="badge badge-primary">
                                {{this.firstname}} {{this.name}}
                            </span></li>
                        {{/each}}
                        </ul></td>
                </tr>
            {{/each}}
        </table>
    </div>

    <!-- Tasks summary :
        all the tasks assigned to the user-->
    <div id="Tasks" class="container tab-pane fade">
        <table class="table">
            <tr>
                <th>Tasks</th>
                <th>Project</th>
                <th>Start date</th>
                <th>Due date</th>
                <th>Status</th>
            </tr>
            {{#each tasks}}
                <tr>
                    <td>{{this.name}}</td>
                    <td>{{this.project.name}}</td>
                    <td>{{formatDate this.start_date "long"}}</td>
                    <td>{{formatDate this.due_date "long"}}</td>
                    <td>{{this.status.name}}</td>
                </tr>
            {{/each}}
        </table>
    </div>

    <!-- Finished tasks summary :
        all the finished tasks assigned to the user-->
    <div id="FinishedTasks" class="container tab-pane fade">
        <table class="table">
            <tr>
                <th>Tasks</th>
                <th>Project</th>
                <th>Start date</th>
                <th>Due date</th>
                <th>Status</th>
            </tr>
            {{#each finishedTasks}}
                <tr>
                    <td>{{this.name}}</td>
                    <td>{{this.project.name}}</td>
                    <td>{{formatDate this.start_date "long"}}</td>
                    <td>{{formatDate this.due_date "long"}}</td>
                    <td>{{this.status.name}}</td>
                </tr>
            {{/each}}
        </table>
    </div>

    <!-- Project detail :
        lists all the tasks of a project-->
    {{#each projects}}
    <div id="Project{{@index}}" class="container tab-pane fade">
        <h3 id="demo">{{this.name}}</h3>
    </div>
    {{/each}}
</div>

<script>
    function myFunction() {
        document.getElementById("demo").innerHTML = "Paragraph changed.";
    }
</script>